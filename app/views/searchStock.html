<div ng-controller="searchStockCtrl" class="container">
	<h4>Search Book</h4>
	<div class="row">
		<div class="col-xs-4">
			<form ng-submit="search()" style="border: none;">
				<input type="radio" name="type" value="isbn" ng-model="searchCat">ISBN
				<input type="radio" name="type" value="intitle" ng-model="searchCat">Title
				<input type="radio" name="type" value="inauthor" ng-model="searchCat">Author
				<input type="radio" name="type" value="inpublisher" ng-model="searchCat">Publisher
				<br>
				<input type="text" name="search" id="search-field" ng-model="searchField">
				<button type="submit" id="search-button" class="orange-colored-button">Search</button>
			</form>
		</div>
		<div class="col-xs-4 col-xs-offset-4" ng-if="hadSearch && !wantAdd">
			<p>If no book matched, please click .. </p>
			<button class="orange-colored-button" ng-click="manualAdd()">
				Insert new book</button>
		</div>
	</div>
	<br>
	<div class="row">
		<div class="col-xs-4" ng-if="totalBooks === 0">
			No book found in database
		</div>
	</div>
	<div class="container">
		<div class="border row" ng-if="totalBooks !== 0 && !wantAdd">
			<div id="result" ng-repeat="book in results">
				<div id="indiBook" class="col-lg-2 col-md-3 col-xs-4" ng-click="chooseBook(book.volumeInfo, 'google')" data-toggle="modal" data-target="#bookConfirmModal">
					<div class="book-info">
						<div>
							<img class="bookPic" ng-if="book.volumeInfo.imageLinks.smallThumbnail === undefined" src="http://webmaster.ypsa.org/wp-content/uploads/2012/08/no_thumb.jpg">
							<img class="bookPic" ng-if="book.volumeInfo.imageLinks.smallThumbnail !== undefined" src="{{book.volumeInfo.imageLinks.smallThumbnail}}">
						</div>
						<br>
						<div class="bookTitle">
							<b ng-if="book.volumeInfo.title === undefined">Not Available</b>
							<b ng-if="book.volumeInfo.title !== undefined">{{book.volumeInfo.title}}</b>
						</div>
						<div style="overflow: hidden; max-height: 40px min-height: 20px;">
							<em ng-if="book.volumeInfo.authors.length === 0">Not Available</em>
							<div ng-repeat="author in book.volumeInfo.authors">
								<em>{{author}} </em>
							</div>
						</div>

						<div style="overflow: hidden; max-height: 40px min-height: 20px;">
							<em ng-if="book.volumeInfo.industryIdentifiers[0].identifier === undefined">ISBN: Not Available</em>
							<em ng-if="book.volumeInfo.industryIdentifiers[0].identifier !== undefined">ISBN: {{book.volumeInfo.industryIdentifiers[0].identifier}}</em>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div ng-if="results.length !== 0 && totalBooks !== 0 && !wantAdd">
			<button class="pagination orange-colored-button" id="previous-page" ng-if="hasPrevious()" ng-click="previousPage()">Previous page</button>
			<button class="pagination orange-colored-button" id="next-page" ng-click="nextPage()" ng-if="hasNext()">Next page</button>
		</div>
		<br>
		<hr>

		<!--manual add stock-->
		<div ng-if="totalBooks === 0 || wantAdd">
			<div>
				<h4>Please enter new book information</h4>
				<h6>(* required)</h6>
			</div>
			<div class="row">
				<div class="col-xs-5 col-xs-offset-1">
					<div class="row">
						<div class="col-xs-4">
							Title *
						</div>
						<div class="col-xs-4">
							<input type="text" placeholder="Title" ng-model="title">
						</div>
					</div>
					<br>
					<div class="row">
						<div class="col-xs-4">
							Author *
						</div>
						<div class="col-xs-4">
							<input type="text" placeholder="Author" ng-model="author">
						</div>
					</div>
					<br>
					<div class="row">
						<div class="col-xs-4">
							Language *
						</div>
						<div class="col-xs-4">
							<select id="lang" ng-model="language">
								<option value="">Select Language</option>
								<option ng-repeat="lang in langs" value="{{lang}}">{{lang}}</option>
							</select>
						</div>
					</div>
					<br>
					<div class="row">
						<div class="col-xs-4">
							Description *
						</div>
						<div class="col-xs-4">
							<textarea rows="5" cols="30" ng-model="description"></textarea>
						</div>
					</div>
					<br>
				</div>
				<div class="col-xs-5">
					<div class="row">
						<div class="col-xs-4">
							ISBN10
						</div>
						<div class="col-xs-4">
							<input type="text" placeholder="ISBN10" ng-model="ISBN10">
						</div>
					</div>
					<br>
					<div class="row">
						<div class="col-xs-4">
							ISBN13
						</div>
						<div class="col-xs-4">
							<input type="text" placeholder="ISBN13" ng-model="ISBN13">
						</div>
					</div>
					<br>
					<div class="row">
						<div class="col-xs-4">
							Pages
						</div>
						<div class="col-xs-4">
							<input type="text" placeholder="Pages" ng-model="pages">
						</div>
					</div>
					<br>
					<div class="row">
						<div class="col-xs-4">
							Publisher
						</div>
						<div class="col-xs-4">
							<input type="text" placeholder="Publisher" ng-model="publisher">
						</div>
					</div>
					<br>
					<div class="row">
						<div class="col-xs-4">
							Publish Date
						</div>
					</div>
					<br>
					<div class="row">
						<div class="col-xs-11 col-xs-offset-1">
							<select id="date" ng-model="day">
								<option value="">Date</option>
								<option ng-repeat="date in initDates" value="{{date}}">{{date}}</option>
							</select>

							<select id="month" ng-model="month">
								<option value="">Month</option>
								<option ng-repeat="month in initMonths" value="{{month}}">{{month}}</option>
							</select>

							<select id="year" ng-model="year">
								<option value="">Year</option>
								<option ng-repeat="year in initYears" value="{{year}}">{{year}}</option>
							</select>
						</div>
					</div>
				</div>
			</div>
			<br>
			<div class="row">
				<div class="col-xs-1 col-xs-offset-4">
					<button type="button" id="submit-button" class="orange-colored-button" ng-click="chooseBook(book.volumeInfo, 'manual')" data-toggle="modal" data-target="#bookConfirmModal">
						Submit</button>
				</div>
				<div class="col-xs-1 col-xs-offset-1">
					<button type="button" id="cancel-button" class="orange-colored-button" ng-click="cancelManual()">
						Cancel</button>
				</div>
			</div>
		</div>
		<br>

		<!-- confirm add stock modal -->
		<div class="modal fade" id="bookConfirmModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
			<div class="modal-dialog" role="document">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal" aria-label="Close">
							<span aria-hidden="true">&times;</span>
						</button>
						<h4 class="modal-title" id="myModalLabel">Book Confirmation</h4>
					</div>
					<div class="modal-body">
						<div class="row">
							<div class="col-sm-3 col-sm-offset-1">
								<img ng-if="specBook.cover_image_url !== undefined" src="{{specBook.cover_image_url}}">
								<img class="bookPic" ng-if="specBook.cover_image_url === undefined" src="http://webmaster.ypsa.org/wp-content/uploads/2012/08/no_thumb.jpg">
							</div>
							<div class="col-sm-8">
								<div class="row">
									<div class="col-sm-4 text-info">Title:</div>
									<div class="col-sm-8">
										<div>{{specBook.title}}</div>
										<div ng-if="specBook.title === null">undefined</div>
									</div>
								</div>
								<div class="row">
									<div class="col-sm-4 text-info">ISBN 13:</div>
									<div class="col-sm-8">
										<div>{{specBook.ISBN13}}</div>
										<div ng-if="specBook.ISBN13 === null">undefined</div>
									</div>
								</div>
								<div class="row" ng-repeat="author in specBook.authors">
									<div class="col-sm-4 text-info">
										<div ng-if="specBook.authors.indexOf(author) === 0">Author:</div>
									</div>
									<div class="col-sm-8">
										<div>{{author}}</div>
									</div>
								</div>
								<div class="row">
									<div class="col-sm-4 text-info">Language:</div>
									<div class="col-sm-8">
										<div>{{specBook.language}}</div>
										<div ng-if="specBook.language === null">undefined</div>
									</div>
								</div>
								<div class="row">
									<div class="col-sm-4 text-info">Pages:</div>
									<div class="col-sm-8">
										<div>{{specBook.pages}}</div>
										<div ng-if="specBook.pages === null">undefined</div>
									</div>
								</div>
								<div class="row">
									<div class="col-sm-4 text-info">Publisher:</div>
									<div class="col-sm-8">
										<div>{{specBook.publisher}}</div>
										<div ng-if="specBook.publisher === null">undefined</div>
									</div>
								</div>
								<div class="row">
									<div class="col-sm-4 text-info">Published Date:</div>
									<div class="col-sm-8">
										<div>{{specBook.publish_date}}</div>
										<div ng-if="specBook.publish_date === null">undefined</div>
									</div>
								</div>
							</div>
						</div>
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
						<button type="button" class="btn btn-primary" ng-if="type === 'google'" ng-click="addBook()" data-dismiss="modal">Next Step</button>
						<button type="button" class="btn btn-primary" ng-if="type === 'manual'" ng-click="goToPhoto()" data-dismiss="modal">Next Step</button>
					</div>
				</div>
			</div>
		</div>
	</div>
